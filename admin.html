<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel — Federal Reserved Accounts</title>
<link rel="stylesheet" href="styles.css" />
<script defer src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.28.0/dist/supabase.min.js"></script>
<script defer src="script.admin.js"></script>
<style>
  body { font-family: Arial, sans-serif; background:#f4f7fa; color:#0a2342; }
  header { padding:1rem; background:#0a2342; color:white; display:flex; justify-content:space-between; align-items:center; }
  h1 { margin:0; font-size:1.2rem; }
  .container { padding:1rem; }
  .card { background:white; border-radius:12px; padding:1rem; margin-bottom:1rem; box-shadow:0 2px 6px rgba(0,0,0,0.06); }
  table { width:100%; border-collapse:collapse; margin-top:0.5rem; }
  th, td { padding:0.6rem; border-bottom:1px solid #e6ecf0; text-align:left; }
  input, select, textarea { width:100%; padding:0.4rem; margin:0.2rem 0; border-radius:6px; border:1px solid #ccc; }
  button { padding:0.5rem 0.8rem; border:none; border-radius:6px; cursor:pointer; }
  .btn-primary { background:#0066cc; color:white; }
  .btn-secondary { background:#e6ecf0; color:#0a2342; }
  .btn-danger { background:#cc0000; color:white; }
  .flex { display:flex; gap:0.5rem; align-items:center; }
  .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; z-index:1000; }
  .modal-content { background:white; border-radius:12px; padding:1rem; max-width:600px; width:95%; }
  .modal img { max-width:100%; margin-top:0.5rem; border-radius:6px; }
  .close { cursor:pointer; font-size:1.2rem; float:right; }
</style>
</head>
<body>

<header>
  <h1>Admin Panel — Federal Reserved Accounts</h1>
  <button class="btn-primary" onclick="logoutAdmin()">Log out</button>
</header>

<div class="container">

  <!-- User Management -->
  <div class="card">
    <h2>Users & Balances</h2>
    <table id="usersTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>Checking</th>
          <th>Savings</th>
          <th>Benefits</th>
          <th>Update Balance</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="6">Loading users...</td></tr>
      </tbody>
    </table>
  </div>

  <!-- Safeguard Methods Management -->
  <div class="card">
    <h2>Safeguard Methods</h2>
    <button class="btn-primary" onclick="openModal('addSafeguardModal')">Add New Method</button>
    <table id="safeguardTable">
      <thead>
        <tr>
          <th>Name</th>
          <th>Description</th>
          <th>Active</th>
          <th>Image</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr><td colspan="5">Loading safeguard methods...</td></tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Add/Edit Safeguard Modal -->
<div class="modal" id="addSafeguardModal">
  <div class="modal-content">
    <span class="close" onclick="closeModal('addSafeguardModal')">&times;</span>
    <h2 id="safeguardModalTitle">Add Safeguard Method</h2>
    <form id="safeguardForm">
      <label>Name</label>
      <input type="text" id="safeguardNameInput" required>
      <label>Description</label>
      <textarea id="safeguardDescInput" rows="3"></textarea>
      <label>Image</label>
      <input type="file" id="safeguardImageInput" accept="image/*">
      <img id="safeguardPreview" src="" alt="Preview" style="display:none;">
      <label>Active</label>
      <select id="safeguardActive">
        <option value="true">Yes</option>
        <option value="false">No</option>
      </select>
      <input type="hidden" id="safeguardId">
      <button type="submit" class="btn-primary" style="margin-top:0.5rem;">Save Method</button>
    </form>
  </div>
</div>

</body>
</html>
