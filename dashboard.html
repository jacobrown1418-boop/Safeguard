<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Federal Reserved Accounts – Dashboard</title>
  <meta name="description" content="User Dashboard — Federal Reserved Accounts" />
  <link rel="icon" href="images/fra-logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    :root {
      --nav-bg: #0a2342;
      --accent: #0077B6;
      --muted: #6b7280;
    }
    body {
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: #f5f7fb;
      color: #111827;
    }
    .f-sidebar { background: var(--nav-bg); color: #fff; min-height: 100vh; padding-bottom: 6rem; }
    .logo-row { display:flex; gap:12px; align-items:center; }
    .logo-row img { width:44px; height:auto; }
    .nav-item { padding:12px 18px; cursor:pointer; display:flex; align-items:center; gap:10px; color:#cfe6ff; border-left:4px solid transparent; }
    .nav-item.active { background: rgba(255,255,255,0.05); border-left-color: var(--accent); color:#fff; font-weight:600; }
    .main { padding:28px; margin-left:0; }
    @media(min-width: 1024px) { .main { margin-left: 18rem; } .f-sidebar { position:fixed; width:18rem; } }

    .account-card { background:white; border-radius:12px; padding:20px; box-shadow:0 6px 20px rgba(9,30,66,0.06); border:1px solid #eef2ff; }
    .ac-balance { font-weight:800; font-size:1.6rem; color:#003366; }

    .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,0.6); align-items:center; justify-content:center; z-index:50; }
    .modal[aria-hidden="false"] { display:flex; }
    .modal-panel { background:#fff; border-radius:12px; padding:24px; width:94%; max-width:700px; box-shadow:0 20px 60px rgba(2,6,23,0.4); }

    .btn-primary { background:var(--accent); color:white; padding:10px 16px; border-radius:8px; font-weight:600; }
    .btn-ghost { background:transparent; border:1px solid #e6eef8; padding:8px 12px; border-radius:8px; }
    .editor-area { width:100%; border:1px solid #e6eef8; border-radius:8px; padding:10px; resize:vertical; }
    .muted { color:var(--muted); }
  </style>
</head>

<body>
  <!-- Sidebar -->
  <aside class="f-sidebar p-6">
    <div class="logo-row mb-6">
      <img src="images/fra-logo.png" alt="logo" />
      <div>
        <div class="font-bold text-lg">Federal Reserved Accounts</div>
        <div class="text-sm text-gray-400">Dashboard Overview</div>
      </div>
    </div>

    <nav>
      <div id="nav-dashboard" class="nav-item active" data-target="section-dashboard">Dashboard Overview</div>
      <div id="nav-assets" class="nav-item" data-target="section-assets">Secure Asset Management</div>

      <hr class="my-4 border-gray-700/30">

      <div id="openRequestDebit" class="nav-item">Request Secure Card</div>
      <div id="openRequestCheck" class="nav-item">Request Checkbook</div>
      <div id="openChangePassword" class="nav-item">Change Password</div>
      <div id="openContact" class="nav-item">Dedicated Support</div>
    </nav>

    <div style="position: absolute; bottom: 18px; left: 24px; right:24px;">
      <button id="logoutBtnSidebar" class="btn-ghost w-full">Logout Securely</button>
    </div>
  </aside>

  <!-- Main -->
  <main class="main">
    <header class="flex items-center justify-between mb-6">
      <div>
        <p class="text-sm text-gray-500">Welcome back</p>
        <h1 id="pf-welcome" class="text-2xl font-semibold">—</h1>
      </div>
      <button id="addMoneyBtn" class="btn-primary">Initiate Deposit</button>
    </header>

    <!-- Dashboard -->
    <section id="section-dashboard" class="mb-6">
      <h2 class="text-xl font-semibold mb-4">Accounts</h2>
      <div id="accountCards" class="grid gap-6 grid-cols-1 sm:grid-cols-2 lg:grid-cols-3">
        <!-- Accounts injected by JS -->
      </div>
    </section>

    <!-- Secure Assets -->
    <section id="section-assets" class="hidden">
      <h2 class="text-xl font-semibold mb-4">Secure Asset Management</h2>
      <p class="text-gray-500 text-sm mb-4">Manage secure cards, checkbooks, and deposit instructions.</p>
      <button class="btn-primary mr-2" onclick="openModal('safeguardModal')">View Safeguard Methods</button>
      <button class="btn-ghost" onclick="openModal('safeguardEditorModal')">Edit Methods (Admin)</button>
    </section>
  </main>

  <!-- Request Secure Card -->
  <div id="requestDebitModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <h3 class="text-lg font-semibold mb-2">Request Secure Card</h3>
      <p class="text-sm text-gray-500 mb-2">Enter your delivery address:</p>
      <form id="debitCardForm">
        <textarea id="debitAddress" class="editor-area mb-3" required></textarea>
        <div class="flex gap-3 justify-end">
          <button type="submit" class="btn-primary">Submit</button>
          <button type="button" class="btn-ghost" data-close="requestDebitModal">Cancel</button>
        </div>
        <p id="debitResult" class="mt-3 hidden text-green-600 font-medium"></p>
      </form>
    </div>
  </div>

  <!-- Request Checkbook -->
  <div id="requestCheckModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <h3 class="text-lg font-semibold mb-2">Request Checkbook</h3>
      <p class="text-sm text-gray-500 mb-2">Enter your delivery address:</p>
      <form id="checkbookForm">
        <textarea id="checkbookAddress" class="editor-area mb-3" required></textarea>
        <div class="flex gap-3 justify-end">
          <button type="submit" class="btn-primary">Submit</button>
          <button type="button" class="btn-ghost" data-close="requestCheckModal">Cancel</button>
        </div>
        <p id="checkbookResult" class="mt-3 hidden text-green-600 font-medium"></p>
      </form>
    </div>
  </div>

  <!-- Change Password (non-functional) -->
  <div id="changePasswordModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <h3 class="text-lg font-semibold mb-2">Change Password</h3>
      <form id="passwordForm">
        <label class="text-sm text-gray-600">Current Password</label>
        <input type="password" class="editor-area mb-3" required>
        <label class="text-sm text-gray-600">New Password</label>
        <input type="password" class="editor-area mb-3" required>
        <label class="text-sm text-gray-600">Confirm Password</label>
        <input type="password" class="editor-area mb-3" required>
        <div class="flex gap-3 justify-end">
          <button type="submit" class="btn-primary">Apply</button>
          <button type="button" class="btn-ghost" data-close="changePasswordModal">Cancel</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Safeguard Modal -->
  <div id="safeguardModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <h3 class="text-lg font-semibold mb-2">Safeguard Methods</h3>
      <p class="text-sm text-gray-600 mb-4">Select one of the methods below to view NDA and instructions:</p>
      <div id="safeguardBody" class="space-y-2"></div>
      <div class="mt-4 text-right">
        <button class="btn-ghost" data-close="safeguardModal">Close</button>
      </div>
    </div>
  </div>

  <!-- Support -->
  <div id="supportModal" class="modal" aria-hidden="true">
    <div class="modal-panel">
      <h3 class="text-lg font-semibold mb-2">Dedicated Support</h3>
      <p class="text-sm text-gray-500 mb-2">Reach us at:</p>
      <p class="text-2xl font-bold text-blue-900 mb-2">+1 (380) 225-0409</p>
      <p class="text-sm text-gray-600">Federal Reserved Accounts<br>Washington, D.C., USA</p>
      <div class="mt-4 text-right">
        <button class="btn-ghost" data-close="supportModal">Close</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
  <script src="dashboard.js" defer></script>
</body>
</html>
